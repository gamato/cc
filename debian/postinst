#!/bin/sh
# postinst script for cc
#
# see: dh_installdeb(1)

set -e

USER="cc"
UG="cc:cc"
CHOWN="/bin/chown"
ADDUSER="/usr/sbin/adduser"
ID="/usr/bin/id"
INGROUP="nagios"


case "$1" in
    configure)
	mkdir -p /var/log/cc
	mkdir -p /var/run/cc

	if id $USER > /dev/null 2>&1; then
		:
	else
		adduser --system --disabled-password --disabled-login \
			--home /var/run/cc --no-create-home --group \
			$USER
        if grep ^$INGROUP: /etc/group > /dev/null 2>&1 ; then
            # group exists, add user to group
            echo adding $USER to group $INGROUP
            #usermod -a $USER -G $INGROUP
            gpasswd -a $USER $INGROUP
        fi
	fi

	chown cc:cc /var/log/cc /var/run/cc
    chmod +x /etc/init.d/cc
    ;;

    abort-upgrade|abort-remove|abort-deconfigure)
    ;;

    *)
        echo "postinst called with unknown argument \`$1'" >&2
        exit 1
    ;;
esac

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.

#DEBHELPER#

exit 0

